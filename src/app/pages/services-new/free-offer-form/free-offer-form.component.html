
<div class="formHeader" *ngIf="type != 'outside' && style != 'secondary' && !page">
    <strong>Get a FREE offer for </strong>
    <h3 *ngIf="!serviceData['service_name']">{{data['name']}}</h3>
    <span class="service-name" *ngIf="serviceData['service_name']">
        {{serviceData['service_name']}}
    </span>
    <div>from 5+ pre-qualified vendors</div>
</div>

<div class="formContainer" id="formContainer" [ngClass]="{'formSubmitted':thankyouMessage, 'secondary' : style == 'secondary'}" #formContainer>
    <div class="topPart" *ngIf="style != 'secondary'">
        <!-- <svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12.8828 2.75C10.9544 2.75 9.06939 3.32183 7.46601 4.39317C5.86263 5.46451 4.61295 6.98726 3.87499 8.76884C3.13704 10.5504 2.94395 12.5108 3.32016 14.4021C3.69637 16.2934 4.62496 18.0307 5.98853 19.3943C7.35209 20.7579 9.08937 21.6865 10.9807 22.0627C12.872 22.4389 14.8324 22.2458 16.614 21.5078C18.3956 20.7699 19.9183 19.5202 20.9896 17.9168C22.061 16.3134 22.6328 14.4284 22.6328 12.5C22.6301 9.91498 21.602 7.43661 19.7741 5.60872C17.9462 3.78084 15.4678 2.75273 12.8828 2.75ZM17.1634 10.7806L11.9134 16.0306C11.8438 16.1004 11.7611 16.1557 11.67 16.1934C11.579 16.2312 11.4814 16.2506 11.3828 16.2506C11.2843 16.2506 11.1867 16.2312 11.0956 16.1934C11.0046 16.1557 10.9218 16.1004 10.8522 16.0306L8.60219 13.7806C8.46146 13.6399 8.3824 13.449 8.3824 13.25C8.3824 13.051 8.46146 12.8601 8.60219 12.7194C8.74292 12.5786 8.93379 12.4996 9.13282 12.4996C9.33184 12.4996 9.52271 12.5786 9.66344 12.7194L11.3828 14.4397L16.1022 9.71937C16.1719 9.64969 16.2546 9.59442 16.3456 9.5567C16.4367 9.51899 16.5343 9.49958 16.6328 9.49958C16.7314 9.49958 16.8289 9.51899 16.92 9.5567C17.011 9.59442 17.0938 9.64969 17.1634 9.71937C17.2331 9.78906 17.2884 9.87178 17.3261 9.96283C17.3638 10.0539 17.3832 10.1515 17.3832 10.25C17.3832 10.3485 17.3638 10.4461 17.3261 10.5372C17.2884 10.6282 17.2331 10.7109 17.1634 10.7806Z" fill="#0053FA"/>
            </svg> -->
        {{page ? 'Get in Touch' : 'Get a No-Obligation Estimate from BuildTwin'}}
    </div>
    <div class="submited-form" *ngIf="thankyouMessage">
        <figure>
            <img src="assets/images/placeholder-thankyou.png" alt="Placeholder thankyou">
        </figure>
        <div class="check-wrapper" *ngIf="!companyId">
            <div class="check"></div>
            <div class="message">
                Thank you!
                <small>Our team will be in touch with you soon.</small>
            </div>
        </div>
        <div class="check-wrapper left-align" *ngIf="companyId">
            <div class="message">
                Thank you for your enquiry!
                <small>
                    We've received your request, and our Success Advisor will connect with you shortly to assist you.<br><br>
                    In the meantime, explore <a href="https://cockpit.buildtwin.com/" target="_blank"><strong>Cockpit</strong></a> — your all-in-one dashboard to effortlessly manage leads and vendor interactions on BuildTwin. <br><br>
                    <a href="javascript:void(0);" (click)="call()">Schedule a quick demo with your Success Advisor to know more.</a>
                </small>
            </div>
        </div>
    </div>
    <form [formGroup]="myForm" (ngSubmit)="onSubmit()">
        <div class="middlePart">
            <ng-container *ngIf="serviceQuery">
                <div class="formRow" *ngIf="type == 'outside' && showdropDown">

                    <div class="selectBox precastField"
                        [ngClass]="{'error-border': (myForm.get('serviceId')?.touched && myForm.get('serviceId')?.invalid)}">
                        <div>
                            <span *ngIf="style == 'secondary'" class="title">Service <span class="red">*</span></span>
                            <span class="selectedValue">
                                {{ (myForm.get('serviceId')?.value && serviceObj[myForm.get('serviceId').value]) ?
                                serviceObj[myForm.get('serviceId').value]['service_name'] : 'Select service' }}
                            </span>
                        </div>
                        <app-bt-select [options]="serviceArray" (selectedTabChange)="selectService($event)"></app-bt-select>
                    </div>
                    <div *ngIf="myForm.get('serviceId')?.touched && myForm.get('serviceId')?.invalid" class="error-message">
                        <span>Service selection is required.</span>
                    </div>

                </div>
                <div class="formRow" *ngIf="showdropDown">

                    <div class="selectBox precastField"
                        [ngClass]="{'error-border': (myForm.get('selectedPrecastServices')?.touched && myForm.get('selectedPrecastServices')?.invalid)}">
                        <div>
                            <span *ngIf="style == 'secondary'" class="title">Sector</span>
                            <span class="selectedValue">
                                {{ myForm.get('selectedPrecastServices')?.value ?
                                sectorObj[myForm.get('selectedPrecastServices').value]['service_name'] : 'Select sector' }}
                            </span>
                        </div>
                        <app-bt-select [options]="sectorArray" (selectedTabChange)="selectSector($event)"></app-bt-select>
                    </div>
                    <div *ngIf="myForm.get('selectedPrecastServices')?.touched && myForm.get('selectedPrecastServices')?.invalid"
                        class="error-message">
                        <span>Sector selection is required.</span>
                    </div>

                </div>

                <div class="formRow" *ngIf="((showdropDown && type != 'outside') || style == 'secondary')">

                    <div class="selectBox precastField"
                        [ngClass]="{'error-border': (myForm.get('buildingCodeId')?.touched && myForm.get('buildingCodeId')?.invalid)}">
                        <div>
                            <span *ngIf="style == 'secondary'" class="title">Building Code</span>
                            <span class="selectedValue">
                                {{ myForm.get('buildingCodeId')?.value ?
                                buildingCodeObj[myForm.get('buildingCodeId').value]['building_code'] : 'Select Building
                                code' }}
                            </span>
                        </div>
                        <app-bt-select [options]="buildingCodeArray"
                            (selectedTabChange)="selectBuildingCode($event)"></app-bt-select>
                    </div>
                    <div *ngIf="myForm.get('buildingCodeId')?.touched && myForm.get('buildingCodeId')?.invalid"
                        class="error-message">
                        <span>Building code selection is required.</span>
                    </div>

                </div>

                <div class="formRow">
                    <div class="selectBox without-arrow"
                        [ngClass]="{'error-border': (myForm.get('email')?.touched && myForm.get('email')?.invalid)}">
                        <div class="normal">
                            <span *ngIf="style == 'secondary'" class="title">Email <span class="red">*</span></span>
                            <input class="input-text" type="text" placeholder="Enter Email" formControlName="email">
                        </div>
                    </div>
                    <div *ngIf="myForm.get('email')?.touched && myForm.get('email')?.invalid" class="error-message">
                        <span *ngIf="myForm.get('email')?.errors?.['required']">Email is required.</span>
                        <span *ngIf="myForm.get('email')?.errors?.['email']">Invalid email format.</span>
                    </div>
                </div>
                <div class="formRow">
                    <div class="selectBox without-arrow"
                        [ngClass]="{'error-border': (myForm.get('projectName')?.touched && myForm.get('projectName')?.invalid)}">
                        <div class="normal">
                            <span *ngIf="style == 'secondary'" class="title">Project Name <span class="red">*</span></span>
                        <input class="input-text" type="text" placeholder="Project Name" formControlName="projectName">
                        </div>
                    </div>
                    <div *ngIf="myForm.get('projectName')?.touched && myForm.get('projectName')?.invalid"
                        class="error-message">
                        <span *ngIf="myForm.get('projectName')?.errors?.['required']">Project Name is required.</span>
                    </div>
                </div>
                <div class="formRow">
                    <div class="selectBox without-arrow">
                        <div class="normal">
                            <textarea class="textarea-description" formControlName="description"
                                placeholder="Description"></textarea>
                        </div>
                    </div>
                </div>
            </ng-container>
            <ng-container *ngIf="!serviceQuery">
                <div class="formRow">
                    <div class="selectBox without-arrow"
                        [ngClass]="{'error-border': (myForm.get('email')?.touched && myForm.get('email')?.invalid)}">
                        <div class="normal">
                            <span *ngIf="style == 'secondary'" class="title">Email <span class="red">*</span></span>
                            <input class="input-text" type="text" placeholder="Enter Email" formControlName="email">
                        </div>
                    </div>
                    <div *ngIf="myForm.get('email')?.touched && myForm.get('email')?.invalid" class="error-message">
                        <span *ngIf="myForm.get('email')?.errors?.['required']">Email is required.</span>
                        <span *ngIf="myForm.get('email')?.errors?.['email']">Invalid email format.</span>
                    </div>
                </div>
            </ng-container>
            <!-- <div class="formRow" *ngIf="showdropDown">
                <app-file-upload-service [data]="isTenderWork" (fileUploadedStatus)="fileUploadedStatus($event)"></app-file-upload-service>
            </div> -->

        </div>
        <div class="bottomPart">
            <h5 *ngIf="style != 'secondary'">Begin Your Enquiry Here</h5>
            <p *ngIf="style != 'secondary'">Take a quick minute to fill this out—BuildTwin’s success advisor will handle the rest.</p>

            <div class="buttonContainer" [ngClass]="{'pt-none' : style == 'secondary', 'normalBtn':normalBtn}">
                <button *ngIf="serviceQuery" class="button-v2 floating_form_submit_enquiry" [ngClass]="{'border border-none':!serviceQuery}" type="submit" [disabled]="myForm.invalid && disableButton" (click)="!serviceQuery?toggleQueryButton():null"> Get Free quote
                </button>
                <button *ngIf="serviceData['service_name']" class="button-v2 floating_form_submit_enquiry" [ngClass]="{'border border-none':serviceQuery}" (click)="serviceQuery?toggleQueryButton():getStarted()"> Sign up for FREE
                </button>
                <button *ngIf="!serviceQuery" class="button-v2 floating_form_submit_enquiry" [ngClass]="{'border border-none':!serviceQuery}" type="submit" [disabled]="myForm.invalid && disableButton" (click)="!serviceQuery?toggleQueryButton():null"> Get Free quote
                </button>
            </div>

            <div class="for-vendor" *ngIf="serviceData['service_name']" >
                <h6>
                    For vendors
                </h6>
                <p>
                    Looking for working with BuildTwin to
promote your Engineering Services?
                </p>
                <a href="https://www.buildtwin.com/get-started" target="_blank">Register NOW</a>
            </div>

            <div class="integrationsContainer" *ngIf="style != 'secondary' && !serviceData['service_name']">
                <ng-container *ngIf="!page">
                    <strong>Additional Feature:</strong>
                    <div class="integrationsList">
                        <div class="listItem">
                            <img src="assets/images/ai/draw-icon-blue.png" width="20" height="20" alt="">
                            <!-- <lib-svg-icon class="integrationsIcon" [name]="'AIschedule'" [size]="20"
                                [sizeH]="20"></lib-svg-icon> -->
                                Drawing Register/Submittal
                        </div>
                        <div class="listItem">
                            <img src="assets/images/ai/quality-check-icon-blue.png" width="20" height="20" alt="">
                            <!-- <lib-svg-icon class="integrationsIcon" [name]="'AIschedule'" [size]="20"
                                [sizeH]="20"></lib-svg-icon> -->
                                Quality Management
                        </div>
                        <div class="listItem">
                            <lib-svg-icon class="integrationsIcon" [name]="'CDEIntegration'" [size]="20"
                                [sizeH]="20"></lib-svg-icon>
                            CDE Integration
                        </div>
                        <div class="listItem">
                            <lib-svg-icon class="integrationsIcon" [name]="'LiveTracking'" [size]="20"
                                [sizeH]="20"></lib-svg-icon>
                            Live Tracking
                        </div>
                        <div class="listItem">
                            <lib-svg-icon class="integrationsIcon" [name]="'RFIManagement'" [size]="20"
                                [sizeH]="20"></lib-svg-icon>
                            RFI Management
                        </div>
                    </div>
                </ng-container>
            </div>
        </div>
    </form>
</div>
<app-hubspot *ngIf="showPopup" [ngClass]="{'active':showPopup}" (closePopupStatus)="closePopupStatus($event)"></app-hubspot>